/**
 * New node file
 */

module.exports = function(grunt) {

	// Project configuration.
	grunt
			.initConfig({
				pkg : grunt.file.readJSON('package.json'),

				concat : {
					socket_js : {
						files : [ {
							src : [ 'controller/server_sockets.js',
									'contoller/socket_rooms.js' ],
							dest : 'build/controller/server_sockets.js'
						} ],
					}

				},
				copy : {
					templates : {

						files : [ {
							expand : true,
							src : ['*','!{public,node_modules,src,*.md}','*/*','!{public,node_modules,src,*.md}'],
							dest : 'build/',
						} ]
					}

				},

				uglify : {
					options : {
						banner : '/*! <%= pkg.name %> <%= grunt.template.today("yyyy-mm-dd") %> */\n'
					},
					build : {
						src : 'public/javascript/chat_front.js',
						dest : 'build/chat_front.min.js'
					}
				},

				clean : {
					foo : {
						src : [ 'build/*' ],
					},
				}

			});

	// Load the plugin that provides the "uglify" task.
	grunt.loadNpmTasks('grunt-contrib-uglify');
	grunt.loadNpmTasks('grunt-contrib-concat');
	grunt.loadNpmTasks('grunt-contrib-copy');
	grunt.loadNpmTasks('grunt-contrib-clean');
	// Default task(s).
	grunt.registerTask('default', [ 'concat', 'copy', 'uglify' ]);
	grunt.registerTask('clean', [ 'clean' ])

};